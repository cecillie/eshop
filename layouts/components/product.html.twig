{% set replaceId = product.section ~ '/' %}
{% set productId = product.id|replace({(replaceId):''}) %}
{% set image = asset(product.image) %}
        <div class="product">
          <div class="product__information">
            <h2 class="product__title">{{ product.name }}</h2>
            <div class="carousel" data-flickity='{ "imagesLoaded": true, "percentPosition": false, "autoPlay": true, "pageDots": false, "fullscreen": true }'>
              <img src="{{ image|default('images/default.png') }}" alt="Image de {{ product.name }}" loading="lazy">
              {%- if product.images is defined ~%}
                {%- for img in product.images ~%}
              <img src="{{ img|default('images/default.png') }}" alt="Image de {{ product.name }}" loading="lazy">
                {%- endfor ~%}
              {%- endif ~%}
            </div>
            <div class="product__description">{{ product.content }}</div>
            <div class="product__details">
              <div>
                {%- for variant in product.variants ~%}
                <label for="{{ productId }}-{{ variant.name|lower }}">{{ variant.name }}</label>
                <select id="{{ productId }}-{{ variant.name|lower }}" class="{{ variant.name|lower }}">
                  {%- for option in variant.options ~%}
                  <option value="{{ option.value }}">{{ option.html }}</option>
                  {%- endfor ~%}
                </select>
                {%- endfor ~%}
              </div>
              <div>
                <label for="{{ productId }}-qty">Quantit√©</label>
                <input type="number" id="{{ productId }}-qty" class="qty" min="1" value="1" />
              </div>
              <button class="buy-button snipcart-add-item"
                data-item-id="{{ productId }}"
                data-item-price="{{ product.price }}"
                data-item-url="{{ url(product,{canonical:true}) }}"
                data-item-name="{{ product.name }}"
                {%- if product.description is defined and product.description %}data-item-description="{{ product.description }}"{% endif ~%}
                data-item-image="{{ asset(product.image,{fingerprint:false})|url({canonical:true}) }}"
                data-item-quantity="1"
                data-item-max-quantity="99"
                data-item-stackable="auto"
                {%- for variant in product.variants ~%}
                data-item-custom{{ loop.index }}-name="{{ variant.name }}"
                data-item-custom{{ loop.index }}-options="{{ variant.options|map(v => "#{v.value}[#{v.price}]")|join('|') }}"
                {%- endfor ~%}
              >
                Ajouter au panier
              </button>
            </div>
          </div>
          <div class="carousel" data-flickity='{ "imagesLoaded": true, "percentPosition": false, "autoPlay": true, "pageDots": false, "fullscreen": true }'>
            <img src="{{ image|default('images/default.png') }}" alt="Image de {{ product.name }}" loading="lazy">
            {%- if product.images is defined ~%}
              {%- for img in product.images ~%}
            <img src="{{ img|default('images/default.png') }}" alt="Image de {{ product.name }}" loading="lazy">
              {%- endfor ~%}
            {%- endif ~%}
          </div>
        </div>
