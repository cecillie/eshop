{% set productId = product.id|replace({(product.section ~ '/'):''}) %}
{% set image = asset(product.image) %}
      <div class="product">
        <div class="product__information">
          <h2 class="product__title">
            {%- if home is defined and home ~%}
            <a href="{{ url(product) }}">{{ product.name }}</a>
            {%- else ~%}
            {{ product.name }}
            {%- endif ~%}
          </h2>
          {%~ include 'components/carousel.html.twig' with {'product':product,'image':image} %}
          <div class="product__description">{{ product.content }}</div>
          <div class="product__details">
            {%- if product.variants is defined ~%}
            <div>
              {%- for variant in product.variants ~%}
                {%- if variant.options is defined ~%}
              <label for="{{ productId }}-{{ variant.name|lower }}">{{ variant.name }}</label>
              <select id="{{ productId }}-{{ variant.name|lower }}" class="{{ variant.name|lower }}">
                  {%- for option in variant.options ~%}
                <option value="{{ option.value }}">{{ option.html }}</option>
                  {%- endfor ~%}
              </select>
                {%- endif ~%}
              {%- endfor ~%}
            </div>
            {%- endif ~%}
            <div>
              <label for="{{ productId }}-qty">Quantit√©</label>
              <input type="number" id="{{ productId }}-qty" class="qty" min="1" max="10" value="1" />
            </div>
            <button class="buy-button snipcart-add-item"
              data-item-id="{{ productId }}"
              data-item-price="{{ product.price }}"
              data-item-url="{{ url(product,{canonical:true}) }}"
              data-item-name="{{ product.name }}"
              {% if product.description is defined and product.description %}data-item-description="{{ product.description }}"{% endif ~%}
              data-item-image="{{ asset(product.image,{fingerprint:false})|url({canonical:true}) }}"
              data-item-quantity="1"
              data-item-max-quantity="99"
              data-item-stackable="auto"
              {% if product.variants is defined -%}
                {%- for variant in product.variants -%}
              data-item-custom{{ loop.index }}-name="{{ variant.name }}"
                  {%- if variant.options is defined ~%}
              data-item-custom{{ loop.index }}-options="{{ variant.options|map(v => "#{v.value}[#{v.price}]")|join('|') }}"
                    {%- for option in variant.options|filter(v => v.guid is defined) ~%}
              data-item-file-guid-{{ option.value|lower }}="{{ option.guid }}"
                    {%- endfor ~%}
                  {%- elseif variant.type is defined ~%}
              data-item-custom{{ loop.index }}-type="{{ variant.type }}"
                  {%- endif ~%}
                {%- endfor ~%}
              {%- endif ~%}
            >
              Ajouter au panier
            </button>
          </div>
        </div>
        {%~ include 'components/carousel.html.twig' with {'product':product,'image':image} ~%}
      </div>
